/*
** Xtank
**
** Copyright 1988 by Terry Donahue
**
** box.h
*/

/* How large a landmark is */
#define LANDMARK_WIDTH 50
#define LANDMARK_HEIGHT 50

/* How large an outpost is */
#define OUTPOST_WIDTH  30
#define OUTPOST_HEIGHT 30

/* Whether an outpost fires */
#define OUTPOST_FIRE  32
#define outpost_shoot(b,fr) \
  ((b->strength >= 32) ? 1 : (outpost_fire[b->strength&31] >> (fr&31)) & 0x1)

/* When the nth bit in the integer is on, fire.  n is the frame mod 32. */
static unsigned int outpost_fire[OUTPOST_FIRE] = {
  0x80808080,0x80808080,0x82081040,0x82081040,
  0x84208420,0x84208420,0x88442210,0x88442210,
  0x88888888,0x88888888,0x91244448,0x91244448,
  0x92489248,0x92489248,0xa4924924,0xa4924924,
  0xa4a4a4a4,0xa4a4a4a4,0xa52a5294,0xa52a5294,
  0xaa54aa54,0xaa54aa54,0xaaaa5554,0xaaaa5554,
  0xaaaaaaaa,0xaaaaaaaa,0xd555aaaa,0xd555aaaa,
  0xd5aad5aa,0xd5aad5aa,0xd6b5ab5a,0xd6b5ab5a
};

/* How often an outposts motion cycles and how many patterns it moves in */
#define OUTPOST_FRAMES 32
#define OUTPOST_PATS   4
#define get_outpost_coord(b,fr) \
  (&outpost_coord[b->strength & 0x3][fr & 0x1f])

#define W BOX_WIDTH
#define H BOX_HEIGHT

Coord outpost_coord[OUTPOST_PATS][OUTPOST_FRAMES] = {
  { /* square */
    {W*.891,H*.500},{W*.891,H*.597},{W*.891,H*.696},{W*.891,H*.793},
    {W*.891,H*.891},{W*.793,H*.891},{W*.696,H*.891},{W*.597,H*.891},
    {W*.500,H*.891},{W*.403,H*.891},{W*.304,H*.891},{W*.207,H*.891},
    {W*.109,H*.891},{W*.109,H*.793},{W*.109,H*.696},{W*.109,H*.597},
    {W*.109,H*.500},{W*.109,H*.403},{W*.109,H*.304},{W*.109,H*.207},
    {W*.109,H*.109},{W*.207,H*.109},{W*.304,H*.109},{W*.403,H*.109},
    {W*.500,H*.109},{W*.597,H*.109},{W*.696,H*.109},{W*.793,H*.109},
    {W*.891,H*.109},{W*.891,H*.207},{W*.891,H*.304},{W*.891,H*.403} },
  { /* diamond */
    {W*.891,H*.500},{W*.842,H*.549},{W*.793,H*.597},{W*.744,H*.647},
    {W*.696,H*.696},{W*.647,H*.744},{W*.597,H*.793},{W*.549,H*.842},
    {W*.500,H*.891},{W*.451,H*.842},{W*.403,H*.793},{W*.353,H*.744},
    {W*.304,H*.696},{W*.256,H*.647},{W*.207,H*.597},{W*.158,H*.549},
    {W*.109,H*.500},{W*.158,H*.451},{W*.207,H*.403},{W*.256,H*.353},
    {W*.304,H*.304},{W*.353,H*.256},{W*.403,H*.207},{W*.451,H*.158},
    {W*.500,H*.109},{W*.549,H*.158},{W*.597,H*.207},{W*.647,H*.256},
    {W*.696,H*.304},{W*.744,H*.353},{W*.793,H*.403},{W*.842,H*.451} },
  { /* circle */
    {W*.891,H*.500},{W*.883,H*.576},{W*.861,H*.649},{W*.825,H*.717},
    {W*.776,H*.776},{W*.717,H*.825},{W*.649,H*.861},{W*.576,H*.883},
    {W*.500,H*.891},{W*.424,H*.883},{W*.351,H*.861},{W*.283,H*.825},
    {W*.224,H*.776},{W*.175,H*.717},{W*.139,H*.649},{W*.117,H*.576},
    {W*.109,H*.500},{W*.117,H*.424},{W*.139,H*.351},{W*.175,H*.283},
    {W*.224,H*.224},{W*.283,H*.175},{W*.351,H*.139},{W*.424,H*.117},
    {W*.500,H*.109},{W*.576,H*.117},{W*.649,H*.139},{W*.717,H*.175},
    {W*.776,H*.224},{W*.825,H*.283},{W*.861,H*.351},{W*.883,H*.424} },
  { /* clover */
    {W*.891,H*.500},{W*.861,H*.578},{W*.793,H*.617},{W*.696,H*.637},
    {W*.617,H*.617},{W*.637,H*.696},{W*.617,H*.793},{W*.578,H*.861},
    {W*.500,H*.891},{W*.422,H*.861},{W*.383,H*.793},{W*.363,H*.696},
    {W*.383,H*.617},{W*.304,H*.637},{W*.207,H*.617},{W*.139,H*.578},
    {W*.109,H*.500},{W*.139,H*.422},{W*.207,H*.383},{W*.304,H*.363},
    {W*.383,H*.383},{W*.363,H*.304},{W*.383,H*.207},{W*.422,H*.139},
    {W*.500,H*.109},{W*.578,H*.139},{W*.617,H*.207},{W*.637,H*.304},
    {W*.617,H*.383},{W*.696,H*.363},{W*.793,H*.383},{W*.861,H*.422} }
};

#undef W
#undef H
