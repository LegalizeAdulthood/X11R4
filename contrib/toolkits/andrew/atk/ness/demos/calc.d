\begindata{arbiter,268958088}
\V 2
\begindata{text, 268602420}
\textdsversion{12}
\template{default}


	Ness Calculator

\bigger{\bigger{\bigger{\bigger{\bigger{\bigger{\bigger{
	\bigger{\bigger{\bigger{ \bold{| 0.0 | }}}}

}}}}}}}

\begindata{lset,269473624}
\V 1
\begindata{lset,268954796}
\V 1
\begindata{lset,269458632}
\V 1
\begindata{cel,269009256}
\V 2
\begindata{value,269153808}
>0
\enddata{value,269153808}
10 269153808 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< allclear
>LINK< 
\begindata{text, 269458536}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (C)

\enddata{text,269458536}
\enddata{cel,269009256}
0 0 0 269009256 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269458632}
\begindata{lset,269458336}
\V 1
\begindata{lset,269473252}
\V 1
\begindata{cel,269458228}
\V 2
\begindata{value,269473184}
>0
\enddata{value,269473184}
10 269473184 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< clearentry
>LINK< EF< raster
\begindata{text, 269458132}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (ce)

\enddata{text,269458132}
\enddata{cel,269458228}
0 0 0 269458228 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269473252}
\begindata{lset,269472924}
\V 1
\begindata{lset,269457820}
\V 1
\begindata{cel,269457712}
\V 2
\begindata{value,269457644}
>2
\enddata{value,269457644}
10 269457644 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< sqrt
>LINK< EF< 
\begindata{text, 269457548}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (sqrt)

\enddata{text,269457548}
\enddata{cel,269457712}
0 0 0 269457712 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269457820}
\begindata{lset,269472484}
\V 1
\begindata{cel,269446844}
\V 2
\begindata{value,269457308}
>0
\enddata{value,269457308}
10 269457308 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< question
>LINK< 
\begindata{text, 269457212}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (?)

\enddata{text,269457212}
\enddata{cel,269446844}
0 0 0 269446844 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269472484}
1 52 0 0 269457820 269472484 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269472924}
1 67 0 0 269473252 269472924 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269458336}
1 77 0 0 269458632 269458336 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,268954796}
\begindata{lset,269472104}
\V 1
\begindata{cel,269446640}
\V 2
\begindata{lset,269456840}
\V 1
\begindata{lset,269456640}
\V 1
\begindata{lset,269456440}
\V 1
\begindata{lset,269456240}
\V 1
\begindata{lset,269456040}
\V 1
\begindata{cel,269455932}
\V 2
\begindata{value,269455864}
>4
\enddata{value,269455864}
10 269455864 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< seven
>LINK< LINK< 
\begindata{text, 269455768}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (7)

\enddata{text,269455768}
\enddata{cel,269455932}
0 0 0 269455932 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269456040}
\begindata{lset,269446136}
\V 1
\begindata{lset,269445936}
\V 1
\begindata{cel,269445828}
\V 2
\begindata{value,269445760}
>2
\enddata{value,269445760}
10 269445760 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< eight
>LINK< LINK< 
\begindata{text, 269445664}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (8)

\enddata{text,269445664}
\enddata{cel,269445828}
0 0 0 269445828 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269445936}
\begindata{lset,269445352}
\V 1
\begindata{lset,269445152}
\V 1
\begindata{cel,269445044}
\V 2
\begindata{value,269444976}
>2
\enddata{value,269444976}
10 269444976 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< nine
>LINK< 
\begindata{text, 269444880}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (9)

\enddata{text,269444880}
\enddata{cel,269445044}
0 0 0 269445044 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269445152}
\begindata{lset,269444620}
\V 1
\begindata{cel,269466604}
\V 2
\begindata{value,269466536}
>1
\enddata{value,269466536}
10 269466536 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< divide
>LINK< LINK< 
\begindata{text, 269466440}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (/)

\enddata{text,269466440}
\enddata{cel,269466604}
0 0 0 269466604 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269444620}
1 53 0 0 269445152 269444620 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269445352}
1 66 0 0 269445936 269445352 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269446136}
1 77 0 0 269456040 269446136 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269456240}
\begindata{lset,269444180}
\V 1
\begindata{lset,269466104}
\V 1
\begindata{cel,269465996}
\V 2
\begindata{value,269465928}
>3
\enddata{value,269465928}
10 269465928 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< four
>LINK< 
\begindata{text, 269465832}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (4)

\enddata{text,269465832}
\enddata{cel,269465996}
0 0 0 269465996 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269466104}
\begindata{lset,269465520}
\V 1
\begindata{lset,269465320}
\V 1
\begindata{cel,269465212}
\V 2
\begindata{value,269465144}
>6
\enddata{value,269465144}
10 269465144 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< five
>LINK< 
\begindata{text, 269465048}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (5)

\enddata{text,269465048}
\enddata{cel,269465212}
0 0 0 269465212 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269465320}
\begindata{lset,269464736}
\V 1
\begindata{lset,269464476}
\V 1
\begindata{cel,269464308}
\V 2
\begindata{value,269464180}
>1
\enddata{value,269464180}
10 269464180 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< six
>LINK< de
\begindata{text, 269464000}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (6)

\enddata{text,269464000}
\enddata{cel,269464308}
0 0 0 269464308 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269464476}
\begindata{lset,269504512}
\V 1
\begindata{cel,269504320}
\V 2
\begindata{value,269504168}
>1
\enddata{value,269504168}
10 269504168 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< times
>LINK< 
\begindata{text, 269503988}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (*)

\enddata{text,269503988}
\enddata{cel,269504320}
0 0 0 269504320 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269504512}
1 53 0 0 269464476 269504512 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269464736}
1 66 0 0 269465320 269464736 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269465520}
1 77 0 0 269466104 269465520 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269444180}
2 49 0 0 269456240 269444180 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269456440}
\begindata{lset,269503544}
\V 1
\begindata{lset,269503260}
\V 1
\begindata{cel,269503068}
\V 2
\begindata{value,269502916}
>1
\enddata{value,269502916}
10 269502916 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< one
>LINK< 
\begindata{text, 269502736}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (1)

\enddata{text,269502736}
\enddata{cel,269503068}
0 0 0 269503068 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269503260}
\begindata{lset,269502292}
\V 1
\begindata{lset,269502008}
\V 1
\begindata{cel,269501816}
\V 2
\begindata{value,269501664}
>1
\enddata{value,269501664}
10 269501664 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< two
>LINK< 
\begindata{text, 269501484}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (2)

\enddata{text,269501484}
\enddata{cel,269501816}
0 0 0 269501816 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269502008}
\begindata{lset,269501040}
\V 1
\begindata{lset,269500756}
\V 1
\begindata{cel,269500564}
\V 2
\begindata{value,269500412}
>1
\enddata{value,269500412}
10 269500412 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< three
>LINK< LINK< 
\begindata{text, 269500232}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (3)

\enddata{text,269500232}
\enddata{cel,269500564}
0 0 0 269500564 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269500756}
\begindata{lset,269499788}
\V 1
\begindata{cel,269499596}
\V 2
\begindata{value,269499444}
>1
\enddata{value,269499444}
10 269499444 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< minus
>LINK< LINK< 
\begindata{text, 269499264}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (-)

\enddata{text,269499264}
\enddata{cel,269499596}
0 0 0 269499596 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269499788}
1 53 0 0 269500756 269499788 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269501040}
1 66 0 0 269502008 269501040 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269502292}
1 77 0 0 269503260 269502292 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269503544}
2 32 0 0 269456440 269503544 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269456640}
\begindata{lset,269498820}
\V 1
\begindata{lset,269498536}
\V 1
\begindata{cel,269498344}
\V 2
\begindata{value,269498192}
>1
\enddata{value,269498192}
10 269498192 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< dot
\begindata{text, 269498012}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (.)

\enddata{text,269498012}
\enddata{cel,269498344}
0 0 0 269498344 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269498536}
\begindata{lset,269497568}
\V 1
\begindata{lset,269497284}
\V 1
\begindata{cel,269497092}
\V 2
\begindata{value,269496940}
>1
\enddata{value,269496940}
10 269496940 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< zero
>LINK< LINK< 
\begindata{text, 269496760}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (0)

\enddata{text,269496760}
\enddata{cel,269497092}
0 0 0 269497092 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269497284}
\begindata{lset,269496316}
\V 1
\begindata{lset,269496032}
\V 1
\begindata{cel,269495840}
\V 2
\begindata{value,269495688}
>1
\enddata{value,269495688}
10 269495688 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< equal
>LINK< LINK< 
\begindata{text, 269495508}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (=)

\enddata{text,269495508}
\enddata{cel,269495840}
0 0 0 269495840 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269496032}
\begindata{lset,269495064}
\V 1
\begindata{cel,269494872}
\V 2
\begindata{value,269494720}
>2
\enddata{value,269494720}
10 269494720 1 0 0 0 
>OBJ< value
>VIEW< buttonV
>REF< plus
>LINK< 
\begindata{text, 269494540}
\textdsversion{12}
[long] <bodyfont-size> (22)

[string] <bodyfont> (andysans)

[string] <label> (+)

\enddata{text,269494540}
\enddata{cel,269494872}
0 0 0 269494872 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269495064}
1 53 0 0 269496032 269495064 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269496316}
1 66 0 0 269497284 269496316 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269497568}
1 77 0 0 269498536 269497568 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269498820}
2 25 0 0 269456640 269498820 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269456840}
0 269456840 0 0 0 0 
>OBJ< lset
>VIEW< lsetview
>REF< lset
>LINK< REF< 
\enddata{cel,269446640}
0 0 0 269446640 0 0 0
>OBJ< cel
>VIEW< celview
>REF< 
\enddata{lset,269472104}
2 80 0 0 268954796 269472104 0
>OBJ< 
>VIEW< 
>REF< 
\enddata{lset,269473624}
\view{lsetview,269473624,2,261,307}


 \
\begindata{ness,269493996}
\origin{00\8 May 1989 at 9:30:26 EDT\wjh:  Fred Hansen\}
\template{default}
\define{fullwidth
menu:[Justify,Full Width]
attr:[LeftMargin LeftMargin Cm -25431]
attr:[RightMargin RightMargin Cm -27743]}
\define{sans
menu:[Font,Sans]
attr:[FontFamily AndySans Int 0]}
-- Calculator


real accum;

marker entry;		-- the characters of the entered number

marker savedOp;

marker oldSavedOp;


function display()

	marker s;

	marker f;

	s := search(base(currentselection(defaulttext)), " |");

	f := search(finish(s), "|");

	if entry = "" then

		-- there is no entry yet:  display the accum

		replace(extent(finish(s), f), " " ~ textimage(accum) ~ " |");

	else

		-- display the entry

		replace(extent(finish(s), f), " " ~ entry ~ " |");

	end if;

end function;


real function displayedvalue()

	if entry = "" then return accum;

	else return parsereal(entry); end if;

end function


function allclear()

	entry := "";

	accum := 0.;

	savedOp := "";

	oldSavedOp := "";

	display();

end function;


function digithit(dig)

	if mouseaction = mouseleftup then

		entry := entry ~ dig;

		display();

		oldSavedOp := "";

	end if

end function;


function Op(nextoperator)

	real v;

	marker thisOp;

	if mouseaction /= mouseleftup then

		return;

	end if;

	if savedOp = "" then

		thisOp := oldSavedOp;

	else

		thisOp := savedOp;

	end if;

	if entry /= "" then 

		-- do the old operation

		v := parsereal(entry);

		entry := "";

		if thisOp = "+" then

			accum := accum + v;

		elif  thisOp = "-" then

			accum := accum - v;

		elif  thisOp = "*" then

			accum := accum * v;

		elif  thisOp = "/" then

			accum := accum / v;

		else 

			accum := v;

		end if;	

		display();

	end if;


	-- establish new operation

	oldSavedOp := savedOp;

	savedOp := nextoperator;

end function;


extend "sqrt"

	on mouse "any"

		if mouseaction = mouseleftup then

			Op("");

			accum := sqrt(accum);

			display();

		end if;

	end mouse

end extend


extend "question"	

	on mouse "any"

		if mouseaction = mouseleftup then 

			marker m;

			m := AskUser("How are you? ", "");

			if m /= "CANCEL" then 

				TellUser("Good, I am " ~ m ~ ", too");

			end if;

		end if;

	end mouse;

end extend

extend "dot"	-- to the right of zero

	on mouse "any"

		if entry = "" then entry := "0.";

		elif search(entry, ".") = "" then

			entry := entry ~ ".";

		end if;

		display();

	end mouse;

end extend


extend "allclear"

	on mouse "any"

		if mouseaction = mouseleftup then

			allclear();

		end if

	end mouse

end extend

extend "clearentry"

	on mouse "any"

		if mouseaction = mouseleftup and entry /= "" then

			entry := "";

			display();

		end if

	end mouse

end extend

extend "equal"

	on mouse "any"

		Op("");

	end mouse

end extend

extend "plus"

	on mouse "any"

		Op("+");

	end mouse

end extend

extend "minus"

	on mouse "any"

		Op("-");

	end mouse

end extend

extend "times"

	on mouse "any"

		Op("*");

	end mouse

end extend

extend "divide"

	on mouse "any"

		Op("/");

	end mouse

end extend

extend "one"

	on mouse "any"

		digithit("1");

	end mouse

end extend

extend "two"

	on mouse "any"

		digithit("2");

	end mouse

end extend

extend "three"

	on mouse "any"

		digithit("3");

	end mouse

end extend

extend "four"

	on mouse "any"

		digithit("4");

	end mouse

end extend

extend "five"

	on mouse "any"

		digithit("5");

	end mouse

end extend

extend "six"

	on mouse "any"

		digithit("6");

	end mouse

end extend

extend "seven"

	on mouse "any"

		digithit("7");

	end mouse

end extend

extend "eight"

	on mouse "any"

		digithit("8");

	end mouse

end extend

extend "nine"

	on mouse "any"

		digithit("9");

	end mouse

end extend

extend "zero"

	on mouse "any"

		digithit("0");

	end mouse

end extend



function main()

	allclear();

end function


function init()

	if isreadonly(currentselection(defaulttext)) then

		textview_toggle_read_only(defaulttext);

	end if;

	allclear();

end function

\enddata{ness,269493996}
\view{nessview,269493996,3,0,154}




\enddata{text,268602420}
1 268602420 0 0 0 0 
>OBJ< text
>VIEW< textview
>REF< 
\enddata{arbiter,268958088}
