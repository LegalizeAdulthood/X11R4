%!
%%Creator: root@bay.csri (Operator)
%%Title: testtext.xpic (xpic)
%%CreationDate: Wed May  4 23:51:57 1988
%%Pages: 1
%%DocumentFonts: (atend)
%%BoundingBox: 9 23.4 450 120.6
%	(in inches) at 0.125 0.325, width 6.125, height 1.35
%%EndComments
% Prolog for xpic to PostScript converter
% Author: Mark Moraes
% $Header: x2ps.pro,v 1.2 88/03/19 16:50:09 moraes Exp 
%	%d D - change style SOLID, DOTTED, SHORT-DASH, LONG-DASH, DOT-DASH
%	%d F - change font ROMAN, BOLD, ITALIC, SPECIAL
%	%d S - change size (font size in points)
%	(%s) rj %d t - text right just. (%d is TOPLINE, MIDLINE, BOTLINE)
%	(%s) lj %d t - text left just. (%d is TOPLINE, MIDLINE, BOTLINE)
%	(%s) ce %d t - text centered (%d is TOPLINE, MIDLINE, BOTLINE)
%	%d %d l - lineto
%	%d %d m - moveto
%	%d %d s - spline segment
%	x - flush line, spline
%	<wid> <ht> <x> <y> b - box
%	<wid> <ht> <x> <y> e - ellipse
%	%d ss - setscale
%	%d W - change linewidth
save 50 dict begin /xpic exch def
/StartXpic {newpath 0 0 moveto [] 0 setdash 0 setgray 1 setlinecap} def
% Set defaults
/fontname /Times-Roman def
/ptsize 12 def
% xpic has 4 fonts R, B, I, S
/nfonts 4 def
/fonts /Times-Roman /Times-Bold /Times-Italic /Symbol nfonts array astore def
% halign has the values for MIDLINE, TOPLINE, BOTLINE
/halign 3 array def
/s {rcurveto} def
/x {stroke} def
/l {lineto} def
/m {moveto} def
/b {
	/ury exch def /urx exch def /lly exch def /llx exch def 
	llx lly moveto urx lly lineto urx ury lineto 
	llx ury lineto llx lly lineto stroke
} def
/mtrx matrix def
/e {
	/yc exch def /xc exch def /yrad exch def /xrad exch def
	xc xrad add yc moveto
	/savematrix mtrx currentmatrix def
	xc yc translate
	xrad yrad scale
	0 0 1 0 360 arc
	savematrix setmatrix stroke
} def
% The next three take the text string, and moveto the right horiz. position
% leaving the string on the stack.
/lj {} def
/rj {dup stringwidth pop neg 0 rmoveto} def
/ce {dup stringwidth pop 2 div neg 0 rmoveto} def
% And this is invoked after one of the three above, and 
% computes the vert. pos, and then displays the string.
/t {halign exch get 0 exch rmoveto show newpath} def
% Store an array of patterns in /styles - a pattern is an array consisting 
% of an array and an offset. Corresp to xpic patterns
% solid, dotted, short-dashed, long-dashed, dot-dashed
/styles [ [] 0 ] [ [1 3] 0 ] [ [4 4] 0 ] [ [8 4] 0 ] [ [1 4 4 4] 0 ]
	5 array astore def
% change style to arg.
/D {stroke styles exch get aload pop setdash newpath} def
/W {stroke setlinewidth newpath} def
% fontbox takes a fontname of the stack, and returns an array
% containing the values of the bottom line of the bounding box, the
% mid line of the bounding box, and the top line of the bounding box
% of that font, taken from the baseline, scaled to a font of size 1
/fontbox {
	findfont dup /FontMatrix get /fm exch def /FontBBox get aload pop
	/ytop exch def pop /ybot exch def pop
	/ymid ytop ybot sub 2 div def
	0 ybot fm dtransform exch pop % botline
	dup neg exch % midline - this works better than (ytop-ybot)/2!
	0 ytop fm dtransform exch pop exch %topline
	% now in the order midline, topline, botline.
	3 array astore
} def
% fontboxes stores the fontbox of each of the fontnames in the 'fonts'
% array
/fontboxes nfonts array def
0 1 nfonts 1 sub {
	fontboxes exch dup fonts exch get fontbox put
} for
% select font
/F {
	dup fonts exch get /fontname exch def fontboxes exch get
	/thisfontbox exch def SF 
} def
% set point size
/S {/ptsize exch def SF} def
% actually set font
/SF {
	fontname findfont ptsize curscale div scalefont setfont
	thisfontbox aload pop
	1 1 3 {
		pop ptsize mul curscale div neg 3 1 roll
	} for
	halign astore pop
} def
% sets the scale to 72 / n, where n is on the stack, and stores the value
% in curscale for font scaling
/curscale 1 def
/ss {/curscale exch 72 exch div dup dup scale def} def
/land {8.5 72 mul curscale div 0 translate 90 rotate} def
StartXpic
%%EndProlog
1 1 scale
80 ss
0 F
12 S
295 40 m
(hello world) rj 2 t
215 40 m
(hello world) rj 1 t
135 40 m
(hello world) rj 0 t
0 D
287 40 m
303 40 l
295 40 l
295 48 l
295 32 l
x
207 40 m
223 40 l
215 40 l
215 48 l
215 32 l
x
127 40 m
143 40 l
135 40 l
135 48 l
135 32 l
x
455 120 m
(hello world) lj 2 t
375 120 m
(hello world) lj 1 t
367 120 m
383 120 l
375 120 l
375 128 l
375 112 l
x
295 120 m
(hello world) lj 0 t
215 120 m
(hello world) ce 2 t
135 120 m
(hello world) ce 1 t
55 120 m
(hello world) ce 0 t
447 120 m
463 120 l
455 120 l
455 128 l
455 112 l
x
287 120 m
303 120 l
295 120 l
295 128 l
295 112 l
x
207 120 m
223 120 l
215 120 l
215 128 l
215 112 l
x
127 120 m
143 120 l
135 120 l
135 128 l
135 112 l
x
47 120 m
63 120 l
55 120 l
55 128 l
55 112 l
x
%%Trailer
showpage
% Trailer for xpic to PostScript converter
% $Header: x2ps.tra,v 1.1 87/11/21 20:33:03 moraes Exp $
xpic end restore
%%DocumentFonts: Times-Roman Times-Italic Times-Bold Special
